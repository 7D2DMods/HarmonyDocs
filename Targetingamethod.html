

<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="generator" content="HelpNDoc Personal Edition 5.2.0.265">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="favicon.ico"/>

  <title>Targeting a method</title>
  <meta name="description" content="A quick overview on DMT and Harmony Modding for 7 Days To Die" /> 
  <meta name="keywords" content="">



  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Targeting a method">
  <meta name="twitter:description" content="A quick overview on DMT and Harmony Modding for 7 Days To Die">

  <!-- Open Graph data -->
  <meta property="og:title" content="Targeting a method" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="A quick overview on DMT and Harmony Modding for 7 Days To Die" />
  <meta property="og:site_name" content="DMT: 7 Days To Die Modding Tool" /> 

  <!-- Bootstrap core CSS -->
  <link href="vendors/bootstrap-3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="vendors/bootstrap-3.3.6/css/ie10-viewport-bug-workaround.css" rel="stylesheet"/>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="vendors/html5shiv-3.7.2/html5shiv.min.js"></script>
      <script src="vendors/respond-1.4.2/respond.min.js"></script>
    <![endif]-->

  <!-- JsTree styles -->
  <link href="vendors/jstree-3.3.2/themes/default/style.min.css" rel="stylesheet"/>

  <!-- Hnd styles -->
  <link href="css/layout.min.css" rel="stylesheet" />
  <link href="css/effects.min.css" rel="stylesheet" />
  <link href="css/theme-light-blue.min.css" rel="stylesheet" />
  <link href="css/print.min.css" rel="stylesheet" media="print" />
  <style type="text/css">nav { width: 350px} @media screen and (min-width:769px) { body.md-nav-expanded #main { margin-left: 350px} body.md-nav-expanded header { padding-left: 364px} }</style>

  <!-- Content style -->
  <link href="css/hnd.content.css" rel="stylesheet" />

  



</head>

<body class="md-nav-expanded">



  <div id="skip-link">
    <a href="#main-content" class="element-invisible">Skip to main content</a>
  </div>

  <header class="headroom">
    <button class="hnd-toggle btn btn-default">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>        
    </button>
    <h1>DMT: 7 Days To Die Modding Tool</h1>
    
  </header>

  <nav class="md-nav-expanded">
    <!-- Nav tabs -->
    <ul class="tab-tabs nav nav-tabs" role="tablist">
      <li id="nav-close"> 
        <button class="hnd-toggle btn btn-default">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        </button>
      </li>
      
	  
        <li role="presentation" class="tab active">
            <a href="#contents" aria-controls="contents" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-list"></i>
                Contents
            </a>
        </li>
      
    </ul>  <!-- /Nav tabs -->

    <!-- Tab panes -->
    <div class="tab-content">
	  
      <div role="tabpanel" class="tab-pane active" id="contents">
        <div id="toc" class="tree-container unselectable"
            data-url="_toc.json"
            data-openlvl="1"
        >
            
        </div>
      </div>  <!-- /contents-->
      
    </div>  <!-- /Tab panes -->

  </nav>

  <div id="main">

    <article>
        <div id="topic-content" class="container-fluid" 
		  data-hnd-id="Targetingamethod"
		  data-hnd-context="14"
		  data-hnd-title="Targeting a method"
		>
            
                <div class="navigation">
                    <ol class="breadcrumb">
                        <li><a href="HarmonyMods1.html">Harmony Mods</a></li><li><a href="Harmony.html">Harmony</a></li>
                    </ol>
                    <div class="nav-arrows">
                        <div class="btn-group btn-group-xs" role="group"><a class="btn btn-default" href="Harmony.html" title="Harmony" role="button"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a><a class="btn btn-default" href="DMTHarmonyFormat.html" title="DMT Harmony Format" role="button"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span></a><a class="btn btn-default" href="PrefixandPostfix.html" title="Prefix and Postfix" role="button"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></a></div>
                    </div>
                </div> 
            

            <a id="main-content"></a>

            <h2>Targeting a method</h2>

            <div class="main-content">
                
<p></p>
<p class="rvps2"><span class="rvts6">Harmony </span><span class="rvts16">targets </span><span class="rvts6">methods to find which ones you want to make changes to. This uses the HarmonyPatch mechanism. </span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p class="rvps2"><span class="rvts6">HarmonyPatch can be used in different combinations of formats to target your method.</span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p class="rvps2"><span class="rvts6">The following guides can be used:</span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<div class="rvps2"><table width="100%" border="1" style="border-color: #000000; border-style: solid; border-spacing: 2px;">
<tr valign="top">
<td style="border-color: #000000; border-style: solid; padding: 1px; width: 316px; height: 17px;"><p class="rvps2"><span class="rvts26">References a Class</span></p>
</td>
<td style="border-color: #000000; border-style: solid; padding: 1px; width: 1057px; height: 17px;"><p class="rvps2"><span class="rvts26">[HarmonyPatch(</span><span class="rvts24">typeof</span><span class="rvts26">(NGuiWdwInGameHUD))] &nbsp; </span></p>
</td>
</tr>
<tr valign="top">
<td style="border-color: #000000; border-style: solid; padding: 1px; width: 316px;"><p class="rvps2"><span class="rvts26">References a Method</span></p>
</td>
<td style="border-color: #000000; border-style: solid; padding: 1px; width: 1057px;"><p class="rvps2"><span class="rvts26">[HarmonyPatch(</span><span class="rvts25">"SetTooltipText"</span><span class="rvts26">)]</span></p>
</td>
</tr>
<tr valign="top">
<td style="border-color: #000000; border-style: solid; padding: 1px; width: 316px;"><p class="rvps2"><span class="rvts26">References a parameter signature</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
</td>
<td style="border-color: #000000; border-style: solid; padding: 1px; width: 1057px;"><p class="rvps2"><span class="rvts26">[HarmonyPatch(</span><span class="rvts24">new</span><span class="rvts26"> Type[] { </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">), </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">[]), </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">), </span><span class="rvts24">typeof</span><span class="rvts26">(ToolTipEvent) })]</span></p>
</td>
</tr>
</table>
</div>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">If you are targeting a method that is not overloaded, then you would only need the first two: Class and Method. However, if the same method name exists with different parameters, you can add a reference to it. </span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">In the above example, the parameter signature would be &nbsp;SetTooltipText( string myString, string[] myStringarray, string anotherString, ToolTipEvent justTheTip ). </span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">Here are some examples from the ClearUI Mod:</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">Vanilla: </span></p>
<p class="rvps10"><span class="rvts43">protected</span><span class="rvts33">&nbsp;</span><span class="rvts43">override</span><span class="rvts33">&nbsp;</span><span class="rvts43">bool</span><span class="rvts33">&nbsp;</span><span class="rvts39">canShowOverlay</span><span class="rvts33">(</span><span class="rvts32">ItemActionData</span><span class="rvts33">&nbsp;</span><span class="rvts38">actionData</span><span class="rvts33">)</span></p>
<div class="rvps2"><table width="100%" border="1" style="border-color: #000000; border-style: solid; border-spacing: 2px;">
<tr valign="top">
<td style="border-color: #000000; border-style: solid; padding: 1px;"><p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts24">typeof</span><span class="rvts26">(ItemActionDynamic))]</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts25">"canShowOverlay"</span><span class="rvts26">)]</span></p>
</td>
</tr>
</table>
</div>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts26">There is only one canShowOverlay in the ItemActionDynamic class, so we only need to specify the method name.</span></p>
<p class="rvps2"><span class="rvts26"><br/></span></p>
<p class="rvps2"><span class="rvts6">In the next example, the SetToolTipText in the NGuiWdwInGameHUD is a bit different. There are actually 5 methods with the same name, with different parameters:</span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p class="rvps10"><span class="rvts43">public</span><span class="rvts33">&nbsp;</span><span class="rvts43">void</span><span class="rvts33">&nbsp;</span><span class="rvts39">SetTooltipText</span><span class="rvts33">(</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_text</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_alertSound</span><span class="rvts33">)</span></p>
<p class="rvps10"><span class="rvts43">public</span><span class="rvts33">&nbsp;</span><span class="rvts43">void</span><span class="rvts33">&nbsp;</span><span class="rvts39">SetTooltipText</span><span class="rvts33">(</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_text</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_alertSound</span><span class="rvts33">,&nbsp;</span><span class="rvts32">ToolTipEvent</span><span class="rvts33">&nbsp;</span><span class="rvts38">handler</span><span class="rvts33">)</span></p>
<p class="rvps10"><span class="rvts43">public</span><span class="rvts33">&nbsp;</span><span class="rvts43">void</span><span class="rvts33">&nbsp;</span><span class="rvts39">SetTooltipText</span><span class="rvts33">(</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_text</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_arg</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_alertSound</span><span class="rvts33">)</span></p>
<p class="rvps10"><span class="rvts43">public</span><span class="rvts33">&nbsp;</span><span class="rvts43">void</span><span class="rvts33">&nbsp;</span><span class="rvts39">SetTooltipText</span><span class="rvts33">(</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_text</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_arg</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_alertSound</span><span class="rvts33">,&nbsp;</span><span class="rvts32">ToolTipEvent</span><span class="rvts33">&nbsp;</span><span class="rvts38">handler</span><span class="rvts33">)</span></p>
<p class="rvps10"><span class="rvts43">public</span><span class="rvts33">&nbsp;</span><span class="rvts43">void</span><span class="rvts33">&nbsp;</span><span class="rvts39">SetTooltipText</span><span class="rvts33">(</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_text</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">[]&nbsp;</span><span class="rvts38">_args</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_alertSound</span><span class="rvts33">,&nbsp;</span><span class="rvts32">ToolTipEvent</span><span class="rvts33">&nbsp;</span><span class="rvts38">eventHandler</span><span class="rvts33">)</span><br/><span class="rvts33"><br/></span></p>
<p class="rvps2"><span class="rvts6">We want to target the last one, so we have to define the parameter signature.</span></p>
<p class="rvps2"><span class="rvts33"><br/></span></p>
<p class="rvps2"><span class="rvts26">Vanilla:</span></p>
<p class="rvps10"><span class="rvts43">public</span><span class="rvts33">&nbsp;</span><span class="rvts43">void</span><span class="rvts33">&nbsp;</span><span class="rvts39">SetTooltipText</span><span class="rvts33">(</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_text</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">[]&nbsp;</span><span class="rvts38">_args</span><span class="rvts33">,&nbsp;</span><span class="rvts43">string</span><span class="rvts33">&nbsp;</span><span class="rvts38">_alertSound</span><span class="rvts33">,&nbsp;</span><span class="rvts32">ToolTipEvent</span><span class="rvts33">&nbsp;</span><span class="rvts38">eventHandler</span><span class="rvts33">)</span></p>
<div class="rvps2"><table width="100%" border="1" style="border-color: #000000; border-style: solid; border-spacing: 2px;">
<tr valign="top">
<td style="border-color: #000000; border-style: solid; padding: 1px;"><p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts24">typeof</span><span class="rvts26">(NGuiWdwInGameHUD))]</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts25">"SetTooltipText"</span><span class="rvts26">)]</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts24">new</span><span class="rvts26"> Type[] { </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">), </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">[]), </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">), </span><span class="rvts24">typeof</span><span class="rvts26">(ToolTipEvent) })]</span></p>
</td>
</tr>
</table>
</div>
<p class="rvps2"><span class="rvts33"><br/></span></p>
<p class="rvps2"><span class="rvts6">These definition must exist on top of the class that contains your Harmony calls, such as Prefix() and Postfix(). Those classes themselves do not need to define an interface to IHarmony, and they can be called whatever you want, as long as they are unique.</span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<div class="rvps2"><table width="100%" border="1" style="border-color: #000000; border-style: solid; border-spacing: 2px;">
<tr valign="top">
<td style="border-color: #000000; border-style: solid; padding: 1px;"><p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;</span><span class="rvts30">// Remove the SetLabel Text calls</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts24">typeof</span><span class="rvts26">(NGUIWindowManager))]</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts25">"SetLabelText"</span><span class="rvts26">)]</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;[HarmonyPatch(</span><span class="rvts24">new</span><span class="rvts26"> Type[] { </span><span class="rvts24">typeof</span><span class="rvts26">(EnumNGUIWindow), </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">string</span><span class="rvts26">), </span><span class="rvts24">typeof</span><span class="rvts26">(</span><span class="rvts24">bool</span><span class="rvts26">) })]</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;</span><span class="rvts24">public</span><span class="rvts26"> </span><span class="rvts24">class</span><span class="rvts26"> </span><span class="rvts29">SphereII_ClearUI_NGUIWindowManager_SetLabelText</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;{</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts24">static</span><span class="rvts26"> </span><span class="rvts24">bool</span><span class="rvts26"> Prefix()</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp; &nbsp; &nbsp;{</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts24">return</span><span class="rvts26"> </span><span class="rvts24">false</span><span class="rvts26">;</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp; &nbsp; &nbsp;}</span></p>
<p class="rvps2"><span class="rvts26"> &nbsp; &nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p class="rvps2"><span class="rvts6"><br/></span></p>
<p></p>
<p class="rvps5" style="clear: both;"><span class="rvts13">Created with the Personal Edition of HelpNDoc: </span><a class="rvts14" href="https://www.helpndoc.com/help-authoring-tool">Free help authoring tool</a></p>

            </div>
            
            <div id="topic_footer"><div id="topic_footer_content">Copyright &copy; 2019 by sphereii. All Rights Reserved.</div></div>
        </div>  <!-- /#topic-content -->
    </article>

    <footer></footer>

  </div>  <!-- /#main -->

  <div class="mask" data-toggle="sm-nav-expanded"></div>
  
  <!-- Modal -->
  <div class="modal fade" id="hndModal" tabindex="-1" role="dialog" aria-labelledby="hndModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="hndModalLabel"></h4>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary modal-btn-close" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="vendors/jquery-1.11.3/jquery.min.js"></script>
  <script src="vendors/bootstrap-3.3.6/js/bootstrap.min.js"></script>
  <script src="vendors/fastclick-1.0.6/fastclick.min.js"></script>
  <script src="vendors/markjs-8.8.3/jquery.mark.min.js"></script>
  <script src="vendors/uri-1.18.9/uri.min.js"></script>
  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="vendors/bootstrap-3.3.6/js/ie10-viewport-bug-workaround.js"></script>
  
  <!-- Headroom -->
  <script src="vendors/headroom-0.9.3/headroom.min.js"></script>
  <script src="vendors/headroom-0.9.3/jquery.headroom.min.js"></script>

  <!-- JsTree -->
  <script src="vendors/jstree-3.3.2/jstree.min.js"></script>

  <!-- HelpNDoc scripts -->
  <script src="_translations.js"></script>
  <script src="js/hndsd.min.js"></script>
  <script src="js/hndse.min.js"></script>
  <script src="js/app.min.js"></script>

  <!-- Scripts -->
  <script>
    $(function() {
      // Instanciate FastClick
      Origami.fastclick(document.body);
      // Create the app
      var app = new Hnd.App();
      // Update translations
      hnd_ut(app);
	  // Custom JS
	  
      // Boot the app
      app.Boot();
    });
  </script>



</body>

</html>

